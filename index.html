<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QQå°è¡¨æƒ…è½¬ç¾¤/æ˜µç§°ä»£ç  0.5</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f5f5f5;
            padding: 10px;
            margin: 0;
            color: #333;
            /* ä¿®å¤ï¼šç§»é™¤ overflow: hiddenï¼Œå…è®¸é¡µé¢è‡ªç”±æ»‘åŠ¨ */
        }
        .container {
            background: white;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
            max-width: 500px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            /* ä¿®å¤ï¼šç§»é™¤å›ºå®šé«˜åº¦å’Œæº¢å‡ºéšè—ï¼Œè®©å®¹å™¨æ ¹æ®å†…å®¹è‡ªåŠ¨æ’‘é«˜ */
            min-height: 80vh; 
            position: relative;
        }
        
        .header-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        h2 {
            font-size: 18px;
            margin: 0;
            font-weight: 700;
        }
        .preset-trigger {
            font-size: 14px;
            color: #0099ff;
            cursor: pointer;
            padding: 6px 12px;
            background: #e6f4ff;
            border-radius: 20px;
            font-weight: bold;
            display: flex;
            align-items: center;
            transition: background 0.2s;
        }
        .preset-trigger:active {
            background: #cce9ff;
        }

        .form-group {
            margin-bottom: 12px;
        }
        label {
            display: block;
            margin-bottom: 6px;
            font-size: 14px;
            font-weight: 600;
            color: #444;
        }
        .hint {
            font-weight: normal;
            color: #888;
            font-size: 12px;
            margin-left: 5px;
        }
        input[type="number"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 16px;
            background: #fafafa;
        }
        input[type="number"]:focus {
            outline: none;
            border-color: #0099ff;
            background: #fff;
        }
        
        button.action-btn {
            width: 100%;
            padding: 12px;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 5px;
            font-weight: bold;
            transition: opacity 0.2s;
        }
        button.action-btn:active { opacity: 0.8; }
        button.generate-btn { background-color: #0099ff; }
        button.copy-all-btn { background-color: #28a745; display: none; margin-top: 10px; }

        /* --- ç»“æœå®¹å™¨ --- */
        .result-area {
            margin-top: 15px;
            border: 1px solid #eee;
            background-color: #fcfcfc;
            padding: 8px;
            border-radius: 8px;
            
            /* æ ¸å¿ƒä¿®æ”¹ï¼šè®¾ç½®ä¸€ä¸ªå›ºå®šé«˜åº¦ï¼ˆå±å¹•é«˜åº¦çš„55%ï¼‰ï¼Œä¿æŒå†…éƒ¨æ»šåŠ¨ */
            /* è¿™æ ·é¡µé¢å¾ˆé•¿æ—¶ï¼Œä½ å¯ä»¥æ»‘åŠ¨é¡µé¢ï¼›æƒ³çœ‹ç»“æœæ—¶ï¼Œå¯ä»¥æ»‘åŠ¨è¿™ä¸ªåŒºåŸŸ */
            height: 55vh; 
            min-height: 300px; 
            
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .result-item {
            background: #fff;
            border: 1px solid #f0f0f0;
            padding: 10px 12px;
            margin-bottom: 8px;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
            flex-shrink: 0; /* é˜²æ­¢å­å…ƒç´ è¢«æŒ¤å‹ */
        }
        .code-info {
            display: flex;
            flex-direction: column;
            flex: 1;
            margin-right: 10px;
            min-width: 0;
        }
        .code-label { font-size: 12px; color: #999; margin-bottom: 3px; }
        .code-display {
            font-family: monospace;
            color: #d63384;
            font-size: 15px;
            letter-spacing: 0.5px;
            word-break: break-all;
        }
        .copy-item-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 13px;
            cursor: pointer;
            white-space: nowrap;
        }

        .usage-note {
            font-size: 12px;
            color: #666;
            margin-top: 15px;
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            line-height: 1.5;
        }
        .usage-note strong { color: #333; }
        .usage-note ul { margin: 5px 0 0 0; padding-left: 18px; }
        .usage-note li { margin-bottom: 2px; }

        /* --- ä¾§è¾¹æ ï¼ˆæŠ½å±‰ï¼‰æ ·å¼ --- */
        /* ä¿®å¤ï¼šæ”¹ä¸º fixed å®šä½ï¼Œç¡®ä¿å§‹ç»ˆè¦†ç›–åœ¨å±å¹•æœ€ä¸Šæ–¹ */
        .drawer-overlay {
            position: fixed; /* æ”¹ä¸º fixed */
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.3);
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }
        .drawer-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .drawer-panel {
            position: fixed; /* æ”¹ä¸º fixed */
            top: 0; bottom: 0; right: 0;
            width: 75%; 
            max-width: 320px;
            background: white;
            z-index: 2001;
            box-shadow: -2px 0 10px rgba(0,0,0,0.15);
            transform: translateX(100%);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            flex-direction: column;
        }
        .drawer-panel.active {
            transform: translateX(0);
        }

        .drawer-header {
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
            font-size: 16px;
            background: #fff;
        }
        .close-drawer {
            border: none;
            background: #f5f5f5;
            color: #666;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .preset-list {
            flex: 1;
            overflow-y: auto;
            padding: 0;
            margin: 0;
            list-style: none;
            -webkit-overflow-scrolling: touch;
        }
        .preset-item {
            padding: 12px 15px;
            border-bottom: 1px solid #f9f9f9;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            transition: background 0.1s;
        }
        .preset-item:active {
            background-color: #f0f7ff;
        }
        .preset-name { 
            font-size: 15px; 
            color: #333; 
            margin-bottom: 4px;
        }
        .preset-meta {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #999;
        }
        .id-badge {
            background: #eee;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
            color: #666;
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header-row">
        <h2>QQå°è¡¨æƒ…ç¾¤/æ˜µç§°</h2>
        <div class="preset-trigger" onclick="toggleDrawer(true)">
            <span>ğŸ“‚ é€‰å°è¡¨æƒ…</span>
        </div>
    </div>
    
    <div class="form-group">
        <label for="pkgId">å°è¡¨æƒ…ID</label>
        <input type="number" id="pkgId" placeholder="è¾“å…¥IDï¼Œå¦‚: 66" />
    </div>

    <div class="form-group">
        <label for="count">ç”Ÿæˆæ•°é‡<span class="hint">å¯è‡ªåŠ¨å¡«å……(é»˜è®¤50)</span></label>
        <input type="number" id="count" value="50" min="1" max="200" />
    </div>

    <button class="action-btn generate-btn" onclick="generateCodes()">ç”Ÿæˆè½¬æ¢ä»£ç </button>
    <button id="copyAllBtn" class="action-btn copy-all-btn">å¤åˆ¶å…¨éƒ¨</button>

    <!-- ç»“æœåŒºåŸŸ -->
    <div class="result-area" id="resultArea">
        <div style="display:flex; flex-direction:column; justify-content:center; align-items:center; height:100%; color:#aaa;">
            <div style="font-size:40px; margin-bottom:10px;">ğŸ¤”</div>
            <div>è¾“å…¥IDæˆ–ç‚¹å‡»å³ä¸Šè§’é€‰æ‹©å°è¡¨æƒ…</div>
        </div>
    </div>

    <div class="usage-note">
    <strong>ä½¿ç”¨è¯´æ˜ï¼š</strong><br>
            1. <strong>è·å–IDï¼š</strong>åˆ†äº«å°è¡¨æƒ…é“¾æ¥ï¼ŒæŸ¥çœ‹é“¾æ¥å‚æ•°ä¸­çš„ <code>id=xxxxx</code> å³ä¸ºIDã€‚<br>
            2. ä½¿ç”¨æ–¹æ³•ï¼šä»…é™æ‰‹æœºç«¯ï¼ˆAndroid/iOSï¼‰ã€‚è¿›å…¥ã€ç¾¤è®¾ç½®ã€‘ï¼Œåœ¨ä¿®æ”¹<strong>ç¾¤èŠåç§°</strong>æˆ–<strong>ç¾¤å†…æ˜µç§°</strong>æ—¶ä½¿ç”¨ã€‚<br>
            3. ç²˜è´´ç”Ÿæ•ˆï¼šç²˜è´´ä»£ç åè‹¥æ˜¾ç¤ºä¹±ç æˆ–ç©ºç™½å±æ­£å¸¸ç°è±¡ï¼Œä¿å­˜åç¨ç­‰ç‰‡åˆ»å³å¯æ­£å¸¸æ˜¾ç¤ºã€‚<br>
<strong>ç‰ˆæœ¬å…¼å®¹ï¼š</strong>QQ 8.9.68 åŠä»¥ä¸Šç‰ˆæœ¬å¯èƒ½å¯¼è‡´éƒ¨åˆ†ä»£ç å¤±æ•ˆï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨æ—§ç‰ˆæœ¬å°è¯•ã€‚<br>
            4. <strong>æ•°é‡é™åˆ¶ï¼š</strong>å•ç»„ ID åŒ…å«çš„è¡¨æƒ…æ•°é‡ä¸å›ºå®šï¼Œå…·ä½“ä¸Šé™è¯·è‡ªè¡Œæµ‹è¯•ã€‚<br>
            5. <strong>ä¿å­˜å¤±è´¥ï¼š</strong>è‹¥æ··åˆä½¿ç”¨å¤šä¸ªè¡¨æƒ…å¯¼è‡´æ— æ³•ä¿å­˜ï¼Œè¯·å°è¯•åœ¨è¡¨æƒ…ä»£ç ä¹‹é—´æ·»åŠ ç©ºæ ¼ã€‚<br>
            6. å‘½åè¯´æ˜ï¼šéƒ¨åˆ†è¡¨æƒ…ä½œè€…æœªå®šä¹‰å…·ä½“åç§°ï¼ˆæ˜¾ç¤ºä¸ºâ€œå°è¡¨æƒ…â€æˆ–é‡å¤å‘½åï¼‰ï¼Œä¸å½±å“ä»£ç çš„æ­£å¸¸ä½¿ç”¨ã€‚
    </div>
</div>

<!-- ä¾§è¾¹æ ç»“æ„ (å·²æ”¹ä¸º Fixed å®šä½) -->
<div class="drawer-overlay" id="drawerOverlay" onclick="toggleDrawer(false)"></div>
<div class="drawer-panel" id="drawerPanel">
    <div class="drawer-header">
        <span>é€‰æ‹©å°è¡¨æƒ…</span>
        <button class="close-drawer" onclick="toggleDrawer(false)">Ã—</button>
    </div>
    <ul class="preset-list" id="presetList">
        <!-- JSå¡«å…… -->
    </ul>
</div>

<script>
    const presets = [
        { name: "å¤¸å¼ å°é»„è„¸ï¼ˆç»ç‰ˆï¼‰", id: 8, count: 25 },
        { name: "åŠ å¼ºå°é»„è„¸", id: 4, count: 20 },
        { name: "å°é»„è„¸æ˜æ˜ŸèŒƒå„¿", id: 18, count: 27 },
        { name: "20å¹´å›å¿†å°è¡¨æƒ…", id: 68, count: 35 },
        { name: "çˆªå­å°è¡¨æƒ…", id: 17, count: 40 },
        { name: "çŒ«çˆªå°è¡¨æƒ…", id: 67, count: 29 },
        { name: "åŠ¨ç‰©çˆªå­å°è¡¨æƒ…", id: 31, count: 45 },
        { name: "å¥³ç¥èŠ‚(1)å°è¡¨æƒ…", id: 64, count: 32 },
        { name: "å¥³ç¥èŠ‚(2)å°è¡¨æƒ…", id: 63, count: 42 },
        { name: "æ˜¥èŠ‚å°è¡¨æƒ…", id: 35, count: 41 },
        { name: "æ–°æ˜¥ç¥ç¦å°è¡¨æƒ…", id: 36, count: 40 },
        { name: "æ¬¢ä¹â€œåŒæ—¦â€èŠ‚", id: 34, count: 40 },
        { name: "æ„šäººèŠ‚å°è¡¨æƒ…", id: 27, count: 41 },
        { name: "åœ£è¯èŠ‚å°è¡¨æƒ…", id: 58, count: 41 },
        { name: "åœ£è¯ä¸“å±å°è¡¨æƒ…", id: 56, count: 33 },
        { name: "Upå–µå°è¡¨æƒ…", id: 21, count: 40 },
        { name: "å—·å¤§å–µå°è¡¨æƒ…", id: 11, count: 40 },
        { name: "æœå½æœå½å°è¡¨æƒ…", id: 66, count: 40 },
        { name: "å¤©ä½¿æ¶é­”å°è¡¨æƒ…", id: 38, count: 42 },
        { name: "å§œå°è™å°è¡¨æƒ…", id: 29, count: 41 },
        { name: "æš´èµ°æ¼«ç”»å°è¡¨æƒ…", id: 16, count: 40 },
        { name: "çŒ«å’ªå°è¡¨æƒ…", id: 26, count: 41 },
        { name: "å†·å…”å®å®å°è¡¨æƒ…", id: 60, count: 40 },
        { name: "å…”å­å°è¡¨æƒ…", id: 32, count: 41 },
        { name: "ç‹å°¼ç›å°è¡¨æƒ…", id: 33, count: 40 },
        { name: "äº²äº²å°ç‹—å­", id: 37, count: 41 },
        { name: "èŠå¤©æ¡†ç‚¸å¼¹", id: 39, count: 41 },
        { name: "ç”œåˆ°ç‰™ç–¼", id: 40, count: 41 },
        { name: "å¹ºæ°”åè¶³æ¿€æƒ…å››å°„", id: 41, count: 22 },
        { name: "æˆ‘æ˜¯ä¸€ä¸ªå°æ’åº§", id: 43, count: 40 },
        { name: "éªšåŠ¨çš„æ‰‹", id: 48, count: 40 },
        { name: "å°è‚šçš®èŒèŒå“’", id: 50, count: 40 },
        { name: "å°è‚šçš®", id: 62, count: 40 },
        { name: "å’¸é±¼ä¹‹ç‹", id: 51, count: 41 },
        { name: "åŒåä¸€æ–¹å—ç‹—", id: 53, count: 41 },
        { name: "åŒåä¸€æ¸…ç©ºè´­ç‰©è½¦", id: 23, count: 40 },
        { name: "é‡‘çŒªå…ˆç”Ÿ", id: 57, count: 41 },
        { name: "å°çº¯æ´å°è¡¨æƒ…", id: 7, count: 40 },
        { name: "æ±ªè›‹å°è¡¨æƒ…", id: 6, count: 40 },
        { name: "æ˜Ÿé™…è¿·èˆª", id: 19, count: 20 },
        { name: "ç‰›ç‰›å’Œçˆ±ä¸½ä¸", id: 20, count: 40 },
        { name: "å†·å…”è½¯ç³–", id: 22, count: 44 },
        { name: "å†·å…”å°è¡¨æƒ…", id: 25, count: 47 },
        { name: "å°çŠ¬å‘†å‘†å®", id: 30, count: 41 },
        { name: "é­”é¬¼çŒ«", id: 42, count: 40 },
        { name: "è½¯èŒjo", id: 70, count: 21 },
        { name: "ææ€ªå°è¡¨æƒ…", id: 28, count: 43 },
        { name: "é…·ç‚«æ–‡å­—å°è¡¨æƒ…", id: 14, count: 40 },
        { name: "ç‚«å½©æ–‡å­—å°è¡¨æƒ…", id: 52, count: 40 },
        { name: "è·³åŠ¨çš„æ–‡å­—", id: 49, count: 42 },
        { name: "æ–‡å­—å°è¡¨æƒ…", id: 24, count: 41 },
        { name: "å°æ–¹å—(åå­—ä¸¢å¤±)", id: 1, count: 20 }
    ];

    const listEl = document.getElementById('presetList');
    presets.forEach(p => {
        const li = document.createElement('li');
        li.className = 'preset-item';
        li.innerHTML = `
            <span class="preset-name">${p.name}</span>
            <div class="preset-meta">
                <span class="id-badge">ID: ${p.id}</span>
                <span>åŒ…å« ${p.count} ä¸ª</span>
            </div>
        `;
        li.onclick = () => {
            selectPreset(p.id, p.count);
        };
        listEl.appendChild(li);
    });

    function toggleDrawer(show) {
        const overlay = document.getElementById('drawerOverlay');
        const panel = document.getElementById('drawerPanel');
        if (show) {
            overlay.classList.add('active');
            panel.classList.add('active');
            // æ‰“å¼€ä¾§è¾¹æ æ—¶ç¦æ­¢èƒŒæ™¯æ»šåŠ¨
            document.body.style.overflow = 'hidden';
        } else {
            overlay.classList.remove('active');
            panel.classList.remove('active');
            // å…³é—­ä¾§è¾¹æ æ¢å¤æ»šåŠ¨
            document.body.style.overflow = '';
        }
    }

    function selectPreset(id, count) {
        document.getElementById('pkgId').value = id;
        document.getElementById('count').value = count;
        toggleDrawer(false);
        generateCodes(); 
    }

    function generateCodes() {
        const pkgIdStr = document.getElementById('pkgId').value;
        const countStr = document.getElementById('count').value;
        const resultArea = document.getElementById('resultArea');
        const copyAllBtn = document.getElementById('copyAllBtn');

        if (!pkgIdStr) {
            alert('è¯·è¾“å…¥å°è¡¨æƒ…ID');
            return;
        }

        const pkgId = parseInt(pkgIdStr);
        const count = parseInt(countStr) || 50;
        
        resultArea.innerHTML = '';
        
        const prefix = "<\$\u00FF\u0100";
        const suffix = ">";
        
        const allCodesArray = [];

        for (let i = 1; i <= count; i++) {
            try {
                const charPkg = String.fromCharCode(pkgId);
                const charEmo = String.fromCharCode(i);
                const finalCode = prefix + charPkg + charEmo + suffix;
                
                allCodesArray.push(finalCode);
                
                const itemDiv = document.createElement('div');
                itemDiv.className = 'result-item';

                const infoDiv = document.createElement('div');
                infoDiv.className = 'code-info';

                const labelSpan = document.createElement('span');
                labelSpan.className = 'code-label';
                labelSpan.textContent = `è¡¨æƒ… #${i}`;

                const codeSpan = document.createElement('span');
                codeSpan.className = 'code-display';
                codeSpan.textContent = finalCode; 

                infoDiv.appendChild(labelSpan);
                infoDiv.appendChild(codeSpan);

                const btn = document.createElement('button');
                btn.className = 'copy-item-btn';
                btn.textContent = 'å¤åˆ¶';
                btn.onclick = function() {
                    copyToClipboard(finalCode, btn);
                };

                itemDiv.appendChild(infoDiv);
                itemDiv.appendChild(btn);
                resultArea.appendChild(itemDiv);

            } catch (e) {
                console.error(e);
            }
        }

        if (allCodesArray.length > 0) {
            copyAllBtn.style.display = 'block';
            copyAllBtn.onclick = function() {
                const allText = allCodesArray.join('\n');
                copyToClipboard(allText, copyAllBtn, "å·²å¤åˆ¶å…¨éƒ¨ï¼");
            };
        } else {
            copyAllBtn.style.display = 'none';
        }
    }

    function copyToClipboard(text, btnElement, successMsg = "å·²å¤åˆ¶") {
        const textarea = document.createElement('textarea');
        textarea.value = text;
        document.body.appendChild(textarea);
        textarea.select();
        try {
            document.execCommand('copy');
            const originalText = btnElement.textContent;
            btnElement.textContent = successMsg;
            btnElement.disabled = true;
            setTimeout(() => {
                btnElement.textContent = originalText;
                btnElement.disabled = false;
            }, 1000);
        } catch (err) {
            alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶');
        }
        document.body.removeChild(textarea);
    }
</script>

</body>
</html>